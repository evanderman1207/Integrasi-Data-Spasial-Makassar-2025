<!doctype html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="initial-scale=1,user-scalable=no,maximum-scale=1,width=device-width">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="stylesheet" href="css/leaflet.css">
        <link rel="stylesheet" href="css/L.Control.Layers.Tree.css">
        <link rel="stylesheet" href="css/L.Control.Locate.min.css">
        <link rel="stylesheet" href="css/qgis2web.css">
        <link rel="stylesheet" href="css/fontawesome-all.min.css">
        <link rel="stylesheet" href="css/leaflet.photon.css">
        <link rel="stylesheet" href="css/leaflet-measure.css">
        <style>
        html, body, #map {
            width: 100%;
            height: 100%;
            padding: 0;
            margin: 0;
        }
        </style>
        <title>Integrasi Data Spasial</title>
    </head>
    <body>
        <div id="map">
        </div>
        <script src="js/qgis2web_expressions.js"></script>
        <script src="js/leaflet.js"></script>
        <script src="js/L.Control.Layers.Tree.min.js"></script>
        <script src="js/L.Control.Locate.min.js"></script>
        <script src="js/leaflet.rotatedMarker.js"></script>
        <script src="js/leaflet.pattern.js"></script>
        <script src="js/leaflet-hash.js"></script>
        <script src="js/Autolinker.min.js"></script>
        <script src="js/rbush.min.js"></script>
        <script src="js/labelgun.min.js"></script>
        <script src="js/labels.js"></script>
        <script src="js/leaflet.photon.js"></script>
        <script src="js/leaflet-measure.js"></script>
        <script src="data/IsochroneMakassar2025_6.js"></script>
        <script src="data/HardPredictionSUSTAINABILITYScenario2045_12.js"></script>
        <script src="data/HardPredictionECONOMICScenario2045_14.js"></script>
        <script src="data/HardPredictionBAUScenario2045_16.js"></script>
        <script src="data/BatasKecamatan_17.js"></script>
        <script>
        var highlightLayer;
        function highlightFeature(e) {
            highlightLayer = e.target;

            if (e.target.feature.geometry.type === 'LineString' || e.target.feature.geometry.type === 'MultiLineString') {
              highlightLayer.setStyle({
                color: '#ffff00',
              });
            } else {
              highlightLayer.setStyle({
                fillColor: '#ffff00',
                fillOpacity: 1
              });
            }
            highlightLayer.openPopup();
        }
        var map = L.map('map', {
            zoomControl:false, maxZoom:28, minZoom:1
        }).fitBounds([[-5.238633975144157,119.34524677362897],[-5.051799004199054,119.57732690537853]]);
        var hash = new L.Hash(map);
        map.attributionControl.setPrefix('<a href="https://github.com/tomchadwin/qgis2web" target="_blank">qgis2web</a> &middot; <a href="https://leafletjs.com" title="A JS library for interactive maps">Leaflet</a> &middot; <a href="https://qgis.org">QGIS</a>');
        var autolinker = new Autolinker({truncate: {length: 30, location: 'smart'}});
        // remove popup's row if "visible-with-data"
        function removeEmptyRowsFromPopupContent(content, feature) {
         var tempDiv = document.createElement('div');
         tempDiv.innerHTML = content;
         var rows = tempDiv.querySelectorAll('tr');
         for (var i = 0; i < rows.length; i++) {
             var td = rows[i].querySelector('td.visible-with-data');
             var key = td ? td.id : '';
             if (td && td.classList.contains('visible-with-data') && feature.properties[key] == null) {
                 rows[i].parentNode.removeChild(rows[i]);
             }
         }
         return tempDiv.innerHTML;
        }
        // modify popup if contains media
        function addClassToPopupIfMedia(content, popup) {
            var tempDiv = document.createElement('div');
            tempDiv.innerHTML = content;
            var imgTd = tempDiv.querySelector('td img');
            if (imgTd) {
                var src = imgTd.getAttribute('src');
                if (/\.(jpg|jpeg|png|gif|bmp|webp|avif)$/i.test(src)) {
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.update();
                    }, 10);
                } else if (/\.(mp3|wav|ogg|aac)$/i.test(src)) {
                    var audio = document.createElement('audio');
                    audio.controls = true;
                    audio.src = src;
                    imgTd.parentNode.replaceChild(audio, imgTd);
                    popup._contentNode.classList.add('media');
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else if (/\.(mp4|webm|ogg|mov)$/i.test(src)) {
                    var video = document.createElement('video');
                    video.controls = true;
                    video.src = src;
                    video.style.width = "400px";
                    video.style.height = "300px";
                    video.style.maxHeight = "60vh";
                    video.style.maxWidth = "60vw";
                    imgTd.parentNode.replaceChild(video, imgTd);
                    popup._contentNode.classList.add('media');
                    // Aggiorna il popup quando il video carica i metadati
                    video.addEventListener('loadedmetadata', function() {
                        popup.update();
                    });
                    setTimeout(function() {
                        popup.setContent(tempDiv.innerHTML);
                        popup.update();
                    }, 10);
                } else {
                    popup._contentNode.classList.remove('media');
                }
            } else {
                popup._contentNode.classList.remove('media');
            }
        }
        var title = new L.Control({'position':'bottomleft'});
        title.onAdd = function (map) {
            this._div = L.DomUtil.create('div', 'info');
            this.update();
            return this._div;
        };
        title.update = function () {
            this._div.innerHTML = '<h2>Integrasi Data Spasial</h2>';
        };
        title.addTo(map);
        var abstract = new L.Control({'position':'bottomleft'});
        abstract.onAdd = function (map) {
            this._div = L.DomUtil.create('div',
            'leaflet-control abstract');
            this._div.id = 'abstract'
                this._div.setAttribute("onmouseenter", "abstract.show()");
                this._div.setAttribute("onmouseleave", "abstract.hide()");
                this.hide();
                return this._div;
            };
            abstract.hide = function () {
                this._div.classList.remove("abstractUncollapsed");
                this._div.classList.add("abstract");
                this._div.innerHTML = 'i'
            }
            abstract.show = function () {
                this._div.classList.remove("abstract");
                this._div.classList.add("abstractUncollapsed");
                this._div.innerHTML = 'Kajian ini mengintegrasikan empat metode analisis spasial CA–Markov, Space Syntax, Isochrone Map, dan Multi-Criteria Evaluation (MCE) untuk memahami dinamika perubahan lahan, struktur jaringan ruang, serta tingkat kesesuaian kawasan. Model CA–Markov digunakan untuk memprediksi pola perubahan tutupan lahan melalui estimasi probabilitas transisi serta identifikasi persistence, gain, dan losses. Space Syntax diterapkan untuk menilai konfigurasi jaringan jalan dan pengaruhnya terhadap pola pergerakan maupun ekspansi kawasan terbangun. Analisis Isochrone Map memetakan tingkat aksesibilitas berdasarkan waktu tempuh menuju pusat-pusat aktivitas, sementara MCE berbasis keanggotaan fuzzy menghasilkan peta kesesuaian wilayah yang terstandarisasi.<br />Hasil integrasi menunjukkan bahwa pertumbuhan lahan terbangun cenderung terakumulasi pada area dengan aksesibilitas tinggi, didukung oleh struktur jaringan jalan yang lebih terintegrasi, serta diperkuat oleh kelas kesesuaian tinggi pada hasil MCE. Pendekatan multimodel ini memberikan dasar analitis yang kuat bagi penyusunan perencanaan tata ruang yang lebih adaptif dan berbasis bukti di Kota Makassar, yang selanjutnya divisualisasikan dalam bentuk WebGIS sederhana.';
        };
        abstract.addTo(map);
        var zoomControl = L.control.zoom({
            position: 'topleft'
        }).addTo(map);
        L.control.locate({locateOptions: {maxZoom: 19}}).addTo(map);
        var measureControl = new L.Control.Measure({
            position: 'topleft',
            primaryLengthUnit: 'meters',
            secondaryLengthUnit: 'kilometers',
            primaryAreaUnit: 'sqmeters',
            secondaryAreaUnit: 'hectares'
        });
        measureControl.addTo(map);
        document.getElementsByClassName('leaflet-control-measure-toggle')[0].innerHTML = '';
        document.getElementsByClassName('leaflet-control-measure-toggle')[0].className += ' fas fa-ruler';
        var bounds_group = new L.featureGroup([]);
        function setBounds() {
        }
        map.createPane('pane_GoogleSatellite_0');
        map.getPane('pane_GoogleSatellite_0').style.zIndex = 400;
        var layer_GoogleSatellite_0 = L.tileLayer('https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}', {
            pane: 'pane_GoogleSatellite_0',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_GoogleSatellite_0;
        map.addLayer(layer_GoogleSatellite_0);
        map.createPane('pane_OpenStreetMap_1');
        map.getPane('pane_OpenStreetMap_1').style.zIndex = 401;
        var layer_OpenStreetMap_1 = L.tileLayer('http://tile.osm.org/{z}/{x}/{y}.png', {
            pane: 'pane_OpenStreetMap_1',
            opacity: 1.0,
            attribution: '',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 19
        });
        layer_OpenStreetMap_1;
        map.createPane('pane_DarkMatterretina_2');
        map.getPane('pane_DarkMatterretina_2').style.zIndex = 402;
        var layer_DarkMatterretina_2 = L.tileLayer('https://a.basemaps.cartocdn.com/dark_all/{z}/{x}/{y}@2x.png', {
            pane: 'pane_DarkMatterretina_2',
            opacity: 1.0,
            attribution: '<a href="https://cartodb.com/basemaps/">Map tiles by CartoDB, under CC BY 3.0. Data by OpenStreetMap, under ODbL.</a>',
            minZoom: 1,
            maxZoom: 28,
            minNativeZoom: 0,
            maxNativeZoom: 20
        });
        layer_DarkMatterretina_2;
        map.createPane('pane_BetweennessCentralityMakassar2025_3');
        map.getPane('pane_BetweennessCentralityMakassar2025_3').style.zIndex = 403;
        var img_BetweennessCentralityMakassar2025_3 = 'data/BetweennessCentralityMakassar2025_3.png';
        var img_bounds_BetweennessCentralityMakassar2025_3 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_BetweennessCentralityMakassar2025_3 = new L.imageOverlay(img_BetweennessCentralityMakassar2025_3,
                                              img_bounds_BetweennessCentralityMakassar2025_3,
                                              {pane: 'pane_BetweennessCentralityMakassar2025_3'});
        bounds_group.addLayer(layer_BetweennessCentralityMakassar2025_3);
        map.createPane('pane_DegreeCentralityMakassar2025_4');
        map.getPane('pane_DegreeCentralityMakassar2025_4').style.zIndex = 404;
        var img_DegreeCentralityMakassar2025_4 = 'data/DegreeCentralityMakassar2025_4.png';
        var img_bounds_DegreeCentralityMakassar2025_4 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_DegreeCentralityMakassar2025_4 = new L.imageOverlay(img_DegreeCentralityMakassar2025_4,
                                              img_bounds_DegreeCentralityMakassar2025_4,
                                              {pane: 'pane_DegreeCentralityMakassar2025_4'});
        bounds_group.addLayer(layer_DegreeCentralityMakassar2025_4);
        map.createPane('pane_ClosenessCentralityMakassar2025_5');
        map.getPane('pane_ClosenessCentralityMakassar2025_5').style.zIndex = 405;
        var img_ClosenessCentralityMakassar2025_5 = 'data/ClosenessCentralityMakassar2025_5.png';
        var img_bounds_ClosenessCentralityMakassar2025_5 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_ClosenessCentralityMakassar2025_5 = new L.imageOverlay(img_ClosenessCentralityMakassar2025_5,
                                              img_bounds_ClosenessCentralityMakassar2025_5,
                                              {pane: 'pane_ClosenessCentralityMakassar2025_5'});
        bounds_group.addLayer(layer_ClosenessCentralityMakassar2025_5);
        function pop_IsochroneMakassar2025_6(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                    <tr>\
                        <th scope="row">AA_MINS</th>\
                        <td>' + (feature.properties['AA_MINS'] !== null ? autolinker.link(String(feature.properties['AA_MINS']).replace(/'/g, '\'').toLocaleString()) : '') + '</td>\
                    </tr>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_IsochroneMakassar2025_6_0(feature) {
            switch(String(feature.properties['AA_MINS'])) {
                case '5':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(215,25,28,1.0)',
                interactive: true,
            }
                    break;
                case '10':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(240,124,74,1.0)',
                interactive: true,
            }
                    break;
                case '15':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(254,201,128,1.0)',
                interactive: true,
            }
                    break;
                case '20':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,255,191,1.0)',
                interactive: true,
            }
                    break;
                case '25':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(199,232,173,1.0)',
                interactive: true,
            }
                    break;
                case '30':
                    return {
                pane: 'pane_IsochroneMakassar2025_6',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(128,191,171,1.0)',
                interactive: true,
            }
                    break;
            }
        }
        map.createPane('pane_IsochroneMakassar2025_6');
        map.getPane('pane_IsochroneMakassar2025_6').style.zIndex = 406;
        map.getPane('pane_IsochroneMakassar2025_6').style['mix-blend-mode'] = 'overlay';
        var layer_IsochroneMakassar2025_6 = new L.geoJson(json_IsochroneMakassar2025_6, {
            attribution: '',
            interactive: true,
            dataVar: 'json_IsochroneMakassar2025_6',
            layerName: 'layer_IsochroneMakassar2025_6',
            pane: 'pane_IsochroneMakassar2025_6',
            onEachFeature: pop_IsochroneMakassar2025_6,
            style: style_IsochroneMakassar2025_6_0,
        });
        bounds_group.addLayer(layer_IsochroneMakassar2025_6);
        map.createPane('pane_FuzzyMembershipFasilitasPendidikan_7');
        map.getPane('pane_FuzzyMembershipFasilitasPendidikan_7').style.zIndex = 407;
        var img_FuzzyMembershipFasilitasPendidikan_7 = 'data/FuzzyMembershipFasilitasPendidikan_7.png';
        var img_bounds_FuzzyMembershipFasilitasPendidikan_7 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_FuzzyMembershipFasilitasPendidikan_7 = new L.imageOverlay(img_FuzzyMembershipFasilitasPendidikan_7,
                                              img_bounds_FuzzyMembershipFasilitasPendidikan_7,
                                              {pane: 'pane_FuzzyMembershipFasilitasPendidikan_7'});
        bounds_group.addLayer(layer_FuzzyMembershipFasilitasPendidikan_7);
        map.createPane('pane_FuzzyMembershipFasilitasEkonomi_8');
        map.getPane('pane_FuzzyMembershipFasilitasEkonomi_8').style.zIndex = 408;
        var img_FuzzyMembershipFasilitasEkonomi_8 = 'data/FuzzyMembershipFasilitasEkonomi_8.png';
        var img_bounds_FuzzyMembershipFasilitasEkonomi_8 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_FuzzyMembershipFasilitasEkonomi_8 = new L.imageOverlay(img_FuzzyMembershipFasilitasEkonomi_8,
                                              img_bounds_FuzzyMembershipFasilitasEkonomi_8,
                                              {pane: 'pane_FuzzyMembershipFasilitasEkonomi_8'});
        bounds_group.addLayer(layer_FuzzyMembershipFasilitasEkonomi_8);
        map.createPane('pane_FuzzyMembershipFasilitasKesehatan_9');
        map.getPane('pane_FuzzyMembershipFasilitasKesehatan_9').style.zIndex = 409;
        var img_FuzzyMembershipFasilitasKesehatan_9 = 'data/FuzzyMembershipFasilitasKesehatan_9.png';
        var img_bounds_FuzzyMembershipFasilitasKesehatan_9 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_FuzzyMembershipFasilitasKesehatan_9 = new L.imageOverlay(img_FuzzyMembershipFasilitasKesehatan_9,
                                              img_bounds_FuzzyMembershipFasilitasKesehatan_9,
                                              {pane: 'pane_FuzzyMembershipFasilitasKesehatan_9'});
        bounds_group.addLayer(layer_FuzzyMembershipFasilitasKesehatan_9);
        map.createPane('pane_MulticriteriaEvaluationMakassar2025_10');
        map.getPane('pane_MulticriteriaEvaluationMakassar2025_10').style.zIndex = 410;
        var img_MulticriteriaEvaluationMakassar2025_10 = 'data/MulticriteriaEvaluationMakassar2025_10.png';
        var img_bounds_MulticriteriaEvaluationMakassar2025_10 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_MulticriteriaEvaluationMakassar2025_10 = new L.imageOverlay(img_MulticriteriaEvaluationMakassar2025_10,
                                              img_bounds_MulticriteriaEvaluationMakassar2025_10,
                                              {pane: 'pane_MulticriteriaEvaluationMakassar2025_10'});
        bounds_group.addLayer(layer_MulticriteriaEvaluationMakassar2025_10);
        map.createPane('pane_SoftPredictionSUSTAINABILITYScenario2045_11');
        map.getPane('pane_SoftPredictionSUSTAINABILITYScenario2045_11').style.zIndex = 411;
        var img_SoftPredictionSUSTAINABILITYScenario2045_11 = 'data/SoftPredictionSUSTAINABILITYScenario2045_11.png';
        var img_bounds_SoftPredictionSUSTAINABILITYScenario2045_11 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_SoftPredictionSUSTAINABILITYScenario2045_11 = new L.imageOverlay(img_SoftPredictionSUSTAINABILITYScenario2045_11,
                                              img_bounds_SoftPredictionSUSTAINABILITYScenario2045_11,
                                              {pane: 'pane_SoftPredictionSUSTAINABILITYScenario2045_11'});
        bounds_group.addLayer(layer_SoftPredictionSUSTAINABILITYScenario2045_11);
        function pop_HardPredictionSUSTAINABILITYScenario2045_12(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_HardPredictionSUSTAINABILITYScenario2045_12_0(feature) {
            switch(String(feature.properties['DN'])) {
                case '1':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(9,194,217,1.0)',
                interactive: false,
            }
                    break;
                case '2':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,91,5,1.0)',
                interactive: false,
            }
                    break;
                case '3':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,255,15,1.0)',
                interactive: false,
            }
                    break;
                case '4':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,246,0,1.0)',
                interactive: false,
            }
                    break;
                case '5':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,24,1.0)',
                interactive: false,
            }
                    break;
                case '6':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(237,233,228,1.0)',
                interactive: false,
            }
                    break;
                case '7':
                    return {
                pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(204,184,121,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HardPredictionSUSTAINABILITYScenario2045_12');
        map.getPane('pane_HardPredictionSUSTAINABILITYScenario2045_12').style.zIndex = 412;
        map.getPane('pane_HardPredictionSUSTAINABILITYScenario2045_12').style['mix-blend-mode'] = 'overlay';
        var layer_HardPredictionSUSTAINABILITYScenario2045_12 = new L.geoJson(json_HardPredictionSUSTAINABILITYScenario2045_12, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HardPredictionSUSTAINABILITYScenario2045_12',
            layerName: 'layer_HardPredictionSUSTAINABILITYScenario2045_12',
            pane: 'pane_HardPredictionSUSTAINABILITYScenario2045_12',
            onEachFeature: pop_HardPredictionSUSTAINABILITYScenario2045_12,
            style: style_HardPredictionSUSTAINABILITYScenario2045_12_0,
        });
        bounds_group.addLayer(layer_HardPredictionSUSTAINABILITYScenario2045_12);
        map.createPane('pane_SoftPredictionECONOMICScenario2045_13');
        map.getPane('pane_SoftPredictionECONOMICScenario2045_13').style.zIndex = 413;
        var img_SoftPredictionECONOMICScenario2045_13 = 'data/SoftPredictionECONOMICScenario2045_13.png';
        var img_bounds_SoftPredictionECONOMICScenario2045_13 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_SoftPredictionECONOMICScenario2045_13 = new L.imageOverlay(img_SoftPredictionECONOMICScenario2045_13,
                                              img_bounds_SoftPredictionECONOMICScenario2045_13,
                                              {pane: 'pane_SoftPredictionECONOMICScenario2045_13'});
        bounds_group.addLayer(layer_SoftPredictionECONOMICScenario2045_13);
        function pop_HardPredictionECONOMICScenario2045_14(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_HardPredictionECONOMICScenario2045_14_0(feature) {
            switch(String(feature.properties['DN'])) {
                case '1':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(9,194,217,1.0)',
                interactive: false,
            }
                    break;
                case '2':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,91,5,1.0)',
                interactive: false,
            }
                    break;
                case '3':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,255,15,1.0)',
                interactive: false,
            }
                    break;
                case '4':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,246,0,1.0)',
                interactive: false,
            }
                    break;
                case '5':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,24,1.0)',
                interactive: false,
            }
                    break;
                case '6':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(237,233,228,1.0)',
                interactive: false,
            }
                    break;
                case '7':
                    return {
                pane: 'pane_HardPredictionECONOMICScenario2045_14',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(204,184,121,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HardPredictionECONOMICScenario2045_14');
        map.getPane('pane_HardPredictionECONOMICScenario2045_14').style.zIndex = 414;
        map.getPane('pane_HardPredictionECONOMICScenario2045_14').style['mix-blend-mode'] = 'overlay';
        var layer_HardPredictionECONOMICScenario2045_14 = new L.geoJson(json_HardPredictionECONOMICScenario2045_14, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HardPredictionECONOMICScenario2045_14',
            layerName: 'layer_HardPredictionECONOMICScenario2045_14',
            pane: 'pane_HardPredictionECONOMICScenario2045_14',
            onEachFeature: pop_HardPredictionECONOMICScenario2045_14,
            style: style_HardPredictionECONOMICScenario2045_14_0,
        });
        bounds_group.addLayer(layer_HardPredictionECONOMICScenario2045_14);
        map.createPane('pane_SoftPredictionBAUScenario2045_15');
        map.getPane('pane_SoftPredictionBAUScenario2045_15').style.zIndex = 415;
        var img_SoftPredictionBAUScenario2045_15 = 'data/SoftPredictionBAUScenario2045_15.png';
        var img_bounds_SoftPredictionBAUScenario2045_15 = [[-5.23345276108357,119.07444833091229],[-4.9737910548079824,119.54387566697221]];
        var layer_SoftPredictionBAUScenario2045_15 = new L.imageOverlay(img_SoftPredictionBAUScenario2045_15,
                                              img_bounds_SoftPredictionBAUScenario2045_15,
                                              {pane: 'pane_SoftPredictionBAUScenario2045_15'});
        bounds_group.addLayer(layer_SoftPredictionBAUScenario2045_15);
        function pop_HardPredictionBAUScenario2045_16(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_HardPredictionBAUScenario2045_16_0(feature) {
            switch(String(feature.properties['DN'])) {
                case '1':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(9,194,217,1.0)',
                interactive: false,
            }
                    break;
                case '2':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,91,5,1.0)',
                interactive: false,
            }
                    break;
                case '3':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(0,255,15,1.0)',
                interactive: false,
            }
                    break;
                case '4':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,246,0,1.0)',
                interactive: false,
            }
                    break;
                case '5':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(255,0,24,1.0)',
                interactive: false,
            }
                    break;
                case '6':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(237,233,228,1.0)',
                interactive: false,
            }
                    break;
                case '7':
                    return {
                pane: 'pane_HardPredictionBAUScenario2045_16',
                stroke: false, 
                fill: true,
                fillOpacity: 1,
                fillColor: 'rgba(204,184,121,1.0)',
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_HardPredictionBAUScenario2045_16');
        map.getPane('pane_HardPredictionBAUScenario2045_16').style.zIndex = 416;
        map.getPane('pane_HardPredictionBAUScenario2045_16').style['mix-blend-mode'] = 'overlay';
        var layer_HardPredictionBAUScenario2045_16 = new L.geoJson(json_HardPredictionBAUScenario2045_16, {
            attribution: '',
            interactive: false,
            dataVar: 'json_HardPredictionBAUScenario2045_16',
            layerName: 'layer_HardPredictionBAUScenario2045_16',
            pane: 'pane_HardPredictionBAUScenario2045_16',
            onEachFeature: pop_HardPredictionBAUScenario2045_16,
            style: style_HardPredictionBAUScenario2045_16_0,
        });
        bounds_group.addLayer(layer_HardPredictionBAUScenario2045_16);
        map.addLayer(layer_HardPredictionBAUScenario2045_16);
        function pop_BatasKecamatan_17(feature, layer) {
            layer.on({
                mouseout: function(e) {
                    for (var i in e.target._eventParents) {
                        if (typeof e.target._eventParents[i].resetStyle === 'function') {
                            e.target._eventParents[i].resetStyle(e.target);
                        }
                    }
                    if (typeof layer.closePopup == 'function') {
                        layer.closePopup();
                    } else {
                        layer.eachLayer(function(feature){
                            feature.closePopup()
                        });
                    }
                },
                mouseover: highlightFeature,
            });
            var popupContent = '<table>\
                </table>';
            var content = removeEmptyRowsFromPopupContent(popupContent, feature);
			layer.on('popupopen', function(e) {
				addClassToPopupIfMedia(content, e.popup);
			});
			layer.bindPopup(content, { maxHeight: 400 });
        }

        function style_BatasKecamatan_17_0(feature) {
            switch(String(feature.properties[''])) {
                default:
                    return {
                pane: 'pane_BatasKecamatan_17',
                opacity: 1,
                color: 'rgba(255,255,255,1.0)',
                dashArray: '5.0,1.0',
                lineCap: 'butt',
                lineJoin: 'miter',
                weight: 1.0, 
                fillOpacity: 0,
                interactive: false,
            }
                    break;
            }
        }
        map.createPane('pane_BatasKecamatan_17');
        map.getPane('pane_BatasKecamatan_17').style.zIndex = 417;
        map.getPane('pane_BatasKecamatan_17').style['mix-blend-mode'] = 'normal';
        var layer_BatasKecamatan_17 = new L.geoJson(json_BatasKecamatan_17, {
            attribution: '',
            interactive: false,
            dataVar: 'json_BatasKecamatan_17',
            layerName: 'layer_BatasKecamatan_17',
            pane: 'pane_BatasKecamatan_17',
            onEachFeature: pop_BatasKecamatan_17,
            style: style_BatasKecamatan_17_0,
        });
        bounds_group.addLayer(layer_BatasKecamatan_17);
        map.addLayer(layer_BatasKecamatan_17);
        const url = {"Nominatim OSM": "https://nominatim.openstreetmap.org/search?format=geojson&addressdetails=1&",
        "France BAN": "https://api-adresse.data.gouv.fr/search/?"}
        var photonControl = L.control.photon({
            url: url["Nominatim OSM"],
            feedbackLabel: '',
            position: 'topleft',
            includePosition: true,
            initial: true,
            // resultsHandler: myHandler,
        }).addTo(map);
        photonControl._container.childNodes[0].style.borderRadius="10px"
        // Create a variable to store the geoJSON data
        var x = null;
        // Create a variable to store the marker
        var marker = null;
        // Add an event listener to the Photon control to create a marker from the returned geoJSON data
        var z = null;
        photonControl.on('selected', function(e) {
            console.log(photonControl.search.resultsContainer);
            if (x != null) {
                map.removeLayer(obj3.marker);
                map.removeLayer(x);
            }
            obj2.gcd = e.choice;
            x = L.geoJSON(obj2.gcd).addTo(map);
            var label = typeof obj2.gcd.properties.label === 'undefined' ? obj2.gcd.properties.display_name : obj2.gcd.properties.label;
            obj3.marker = L.marker(x.getLayers()[0].getLatLng()).bindPopup(label).addTo(map);
            map.setView(x.getLayers()[0].getLatLng(), 17);
            z = typeof e.choice.properties.label === 'undefined'? e.choice.properties.display_name : e.choice.properties.label;
            console.log(e);
            e.target.input.value = z;
        });
        var search = document.getElementsByClassName("leaflet-photon leaflet-control")[0];
        search.classList.add("leaflet-control-search")
        search.style.display = "flex";
        search.style.backgroundColor="rgba(255,255,255,0.5)" 

        // Create the new button element
        var button = document.createElement("div");
        button.id = "gcd-button-control";
        button.className = "gcd-gl-btn fa fa-search search-button";

        // Insert the button at the beginning of the search control
        search.insertBefore(button, search.firstChild);
        last = search.lastChild;
        last.style.display = "none";
        button.addEventListener("click", function (e) {
            if (last.style.display === "none") {
                last.style.display = "block";
            } else {
                last.style.display = "none";
            }
        });
        var overlaysTree = [
            {label: 'Batas Kecamatan<br /><table><tr><td style="text-align: center;"><img src="legend/BatasKecamatan_17_0.png" /></td><td></td></tr></table>', layer: layer_BatasKecamatan_17},
        {label: '<b>BAU SCENARIO MAKASSAR 2045</b>',  selectAllCheckbox: true, children: [
            {label: 'Hard Prediction BAU Scenario 2045<br /><table><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_Perairan0.png" /></td><td>Perairan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_Hutan1.png" /></td><td>Hutan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_PertanianLahanBasah2.png" /></td><td>Pertanian Lahan Basah</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_PertanianLahanKering3.png" /></td><td>Pertanian Lahan Kering</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_KawasaTerbangun4.png" /></td><td>Kawasa Terbangun</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_TanahTerbuka5.png" /></td><td>Tanah Terbuka</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionBAUScenario2045_16_SemakBelukar6.png" /></td><td>Semak Belukar</td></tr></table>', layer: layer_HardPredictionBAUScenario2045_16},
            {label: "Soft  Prediction BAU Scenario 2045", layer: layer_SoftPredictionBAUScenario2045_15},]},
        {label: '<b>ECONOMIC SCENARIO MAKASSAR 2045</b>', collapsed: true, selectAllCheckbox: true, children: [
            {label: 'Hard Prediction ECONOMIC Scenario 2045<br /><table><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_Perairan0.png" /></td><td>Perairan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_Hutan1.png" /></td><td>Hutan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_PertanianLahanBasah2.png" /></td><td>Pertanian Lahan Basah</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_PertanianLahanKering3.png" /></td><td>Pertanian Lahan Kering</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_KawasaTerbangun4.png" /></td><td>Kawasa Terbangun</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_TanahTerbuka5.png" /></td><td>Tanah Terbuka</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionECONOMICScenario2045_14_SemakBelukar6.png" /></td><td>Semak Belukar</td></tr></table>', layer: layer_HardPredictionECONOMICScenario2045_14},
            {label: "Soft Prediction ECONOMIC Scenario 2045", layer: layer_SoftPredictionECONOMICScenario2045_13},]},
        {label: '<b>SUSTAINABILITY SCENARIO MAKASSAR 2045</b>', collapsed: true, selectAllCheckbox: true, children: [
            {label: 'Hard Prediction SUSTAINABILITY Scenario 2045<br /><table><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_Perairan0.png" /></td><td>Perairan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_Hutan1.png" /></td><td>Hutan</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_PertanianLahanBasah2.png" /></td><td>Pertanian Lahan Basah</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_PertanianLahanKering3.png" /></td><td>Pertanian Lahan Kering</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_KawasaTerbangun4.png" /></td><td>Kawasa Terbangun</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_TanahTerbuka5.png" /></td><td>Tanah Terbuka</td></tr><tr><td style="text-align: center;"><img src="legend/HardPredictionSUSTAINABILITYScenario2045_12_SemakBelukar6.png" /></td><td>Semak Belukar</td></tr></table>', layer: layer_HardPredictionSUSTAINABILITYScenario2045_12},
            {label: "Soft Prediction SUSTAINABILITY Scenario 2045", layer: layer_SoftPredictionSUSTAINABILITYScenario2045_11},]},
        {label: '<b>Multi Criteria Evaluation Makassar 2025</b>', collapsed: true, selectAllCheckbox: true, children: [
            {label: "Multicriteria Evaluation Makassar 2025", layer: layer_MulticriteriaEvaluationMakassar2025_10},
            {label: "Fuzzy Membership Fasilitas Kesehatan", layer: layer_FuzzyMembershipFasilitasKesehatan_9},
            {label: "Fuzzy Membership Fasilitas Ekonomi", layer: layer_FuzzyMembershipFasilitasEkonomi_8},
            {label: "Fuzzy Membership Fasilitas Pendidikan", layer: layer_FuzzyMembershipFasilitasPendidikan_7},]},
        {label: '<b>Isochrone Analysis Makassar 2025</b>', collapsed: true, selectAllCheckbox: true, children: [
            {label: 'Isochrone Makassar 2025<br /><table><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_5Minute0.png" /></td><td>5 Minute</td></tr><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_10Minute1.png" /></td><td>10 Minute</td></tr><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_15Minute2.png" /></td><td>15 Minute</td></tr><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_20Minute3.png" /></td><td>20 Minute</td></tr><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_25Minute4.png" /></td><td>25 Minute</td></tr><tr><td style="text-align: center;"><img src="legend/IsochroneMakassar2025_6_30Minute5.png" /></td><td>30 Minute</td></tr></table>', layer: layer_IsochroneMakassar2025_6},]},
        {label: '<b>Space Syntax Analysis Makassar 2025</b>', collapsed: true, selectAllCheckbox: true, children: [
            {label: "Closeness Centrality Makassar 2025", layer: layer_ClosenessCentralityMakassar2025_5},
            {label: "Degree Centrality Makassar 2025", layer: layer_DegreeCentralityMakassar2025_4},
            {label: "Betweenness Centrality Makassar 2025", layer: layer_BetweennessCentralityMakassar2025_3},
            {label: "Dark Matter (retina)", layer: layer_DarkMatterretina_2},]},
        {label: '<b>Citra</b>',  selectAllCheckbox: true, children: [
            {label: "OpenStreetMap", layer: layer_OpenStreetMap_1},
            {label: "Google Satellite", layer: layer_GoogleSatellite_0, radioGroup: 'bm' },]},]
        var lay = L.control.layers.tree(null, overlaysTree,{
            //namedToggle: true,
            //selectorBack: false,
            //closedSymbol: '&#8862; &#x1f5c0;',
            //openedSymbol: '&#8863; &#x1f5c1;',
            //collapseAll: 'Collapse all',
            //expandAll: 'Expand all',
            collapsed: true,
        });
        lay.addTo(map);
        setBounds();
        var i = 0;
        layer_BatasKecamatan_17.eachLayer(function(layer) {
            var context = {
                feature: layer.feature,
                variables: {}
            };
            layer.bindTooltip((layer.feature.properties['KECAMATAN'] !== null?String('<div style="color: #323232; font-size: 5pt; font-family: \'Open Sans\', sans-serif;">' + layer.feature.properties['KECAMATAN']) + '</div>':''), {permanent: true, offset: [-0, -16], className: 'css_BatasKecamatan_17'});
            labels.push(layer);
            totalMarkers += 1;
              layer.added = true;
              addLabel(layer, i);
              i++;
        });
        L.ImageOverlay.include({
            getBounds: function () {
                return this._bounds;
            }
        });
        resetLabels([layer_BatasKecamatan_17]);
        map.on("zoomend", function(){
            resetLabels([layer_BatasKecamatan_17]);
        });
        map.on("layeradd", function(){
            resetLabels([layer_BatasKecamatan_17]);
        });
        map.on("layerremove", function(){
            resetLabels([layer_BatasKecamatan_17]);
        });
        </script>        
    </body>
</html>
